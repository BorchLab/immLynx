% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/runEmbeddings.R
\name{runEmbeddings}
\alias{runEmbeddings}
\title{Generate Protein Language Model Embeddings for TCR Sequences}
\usage{
runEmbeddings(
  input,
  chains = c("TRB", "TRA", "both"),
  model_name = "facebook/esm2_t12_35M_UR50D",
  pool = "mean",
  chunk_size = 32,
  reduction_name = "tcr_esm",
  reduction_key = "ESM_",
  return_object = TRUE,
  ...
)
}
\arguments{
\item{input}{A Seurat or SingleCellExperiment object containing scRepertoire TCR data.}

\item{chains}{Which chain(s) to embed: "TRB", "TRA", or "both". Default is "TRB".}

\item{model_name}{Hugging Face model name. Default is "facebook/esm2_t12_35M_UR50D".
Other options: "facebook/esm2_t33_650M_UR50D", "facebook/esm2_t36_3B_UR50D"}

\item{pool}{Pooling method: "mean", "cls", or "none". Default is "mean".}

\item{chunk_size}{Number of sequences to process at once. Default is 32.}

\item{reduction_name}{Name for the dimensional reduction. Default is "tcr_esm".}

\item{reduction_key}{Key prefix for embeddings in reduction. Default is "ESM_".}

\item{return_object}{Logical. If TRUE, adds embeddings as dimensional reduction.
If FALSE, returns list with embeddings and metadata. Default is TRUE.}

\item{...}{Additional arguments passed to proteinEmbeddings().}
}
\value{
If return_object=TRUE, returns input object with embeddings added as a
  dimensional reduction. If FALSE, returns list with embeddings matrix and metadata.
}
\description{
Extracts TCR CDR3 sequences from a Seurat or SingleCellExperiment object
  and generates embeddings using a protein language model (e.g., ESM-2).
}
\details{
This function uses protein language models to generate dense vector
  representations of TCR CDR3 sequences. These embeddings can be used for:
  - Dimensionality reduction and visualization
  - Clustering TCRs by sequence similarity
  - Downstream machine learning tasks
}
\examples{
data(immLynx_example)
\donttest{
  # Generate ESM-2 embeddings for TRB chain
  seurat_obj <- runEmbeddings(immLynx_example,
                              chains = "TRB")

  # Use a larger ESM-2 model
  seurat_obj <- runEmbeddings(immLynx_example,
                              chains = "TRB",
                              model_name = "facebook/esm2_t33_650M_UR50D")

  # Embed both chains together
  seurat_obj <- runEmbeddings(immLynx_example,
                              chains = "both")

  # Use CLS pooling instead of mean pooling
  seurat_obj <- runEmbeddings(immLynx_example,
                              chains = "TRB",
                              pool = "cls")

  # Get raw embeddings as a list
  emb_list <- runEmbeddings(immLynx_example,
                            chains = "TRB",
                            return_object = FALSE)
  dim(emb_list$embeddings)
}
}
