% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/runEmbeddings.R
\name{runEmbeddings}
\alias{runEmbeddings}
\title{Generate Protein Language Model Embeddings for TCR Sequences}
\usage{
runEmbeddings(
  seurat_obj,
  chains = c("TRB", "TRA", "both"),
  model_name = "facebook/esm2_t12_35M_UR50D",
  pool = "mean",
  chunk_size = 32,
  reduction_name = "tcr_esm",
  reduction_key = "ESM_",
  return_seurat = TRUE,
  ...
)
}
\arguments{
\item{seurat_obj}{A Seurat object containing scRepertoire TCR data.}

\item{chains}{Which chain(s) to embed: "TRB", "TRA", or "both". Default is "TRB".}

\item{model_name}{Hugging Face model name. Default is "facebook/esm2_t12_35M_UR50D".
Other options: "facebook/esm2_t33_650M_UR50D", "facebook/esm2_t36_3B_UR50D"}

\item{pool}{Pooling method: "mean", "cls", or "none". Default is "mean".}

\item{chunk_size}{Number of sequences to process at once. Default is 32.}

\item{reduction_name}{Name for the dimensional reduction (stored in Seurat object).
Default is "tcr_esm".}

\item{reduction_key}{Key prefix for embeddings in reduction. Default is "ESM_".}

\item{return_seurat}{Logical. If TRUE, adds embeddings as dimensional reduction.
If FALSE, returns list with embeddings and metadata. Default is TRUE.}

\item{...}{Additional arguments passed to proteinEmbeddings().}
}
\value{
If return_seurat=TRUE, returns Seurat object with embeddings added as a
  dimensional reduction (accessible via seurat_obj[[reduction_name]]).
  If FALSE, returns list with embeddings matrix and metadata.
}
\description{
Extracts TCR CDR3 sequences from a Seurat object and generates embeddings
  using a protein language model (e.g., ESM-2).
}
\details{
This function uses protein language models to generate dense vector
  representations of TCR CDR3 sequences. These embeddings can be used for:
  - Dimensionality reduction and visualization
  - Clustering TCRs by sequence similarity
  - Downstream machine learning tasks
}
\examples{
\dontrun{
  # Generate embeddings for TRB sequences
  seurat_obj <- runEmbeddings(seurat_obj, chains = "TRB")

  # Use larger model for better embeddings
  seurat_obj <- runEmbeddings(seurat_obj, 
                              chains = "TRB",
                              model_name = "facebook/esm2_t33_650M_UR50D")

  # Visualize embeddings
  seurat_obj <- RunUMAP(seurat_obj, reduction = "tcr_esm", dims = 1:30)
  DimPlot(seurat_obj, reduction = "umap")
}
}
